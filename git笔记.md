Git

### 文件的版本

- 操作麻烦  每次都需要复制 粘贴  重命名
- 命名不规范  无法通过文件名知道具体做了哪些修改
- 容易丢失  硬盘故障  不小心删除  很容易丢失
- 协作困难   手动合并每个人对项目文件的修改

### 版本控制软件

> **用来记录文件变化**，以便将来查阅特定版本修订情况的系统---版本控制系统
>
> 通俗理解   将手动管理文件版本方式------软件管理文件的版本

### 版本控制软件好处

- 操作简便
- 易于对比
- 易于回溯  将选定文件回溯到之前的版本
- 不易丢失
- 协作方便    分支功能

### 版本控制系统的分类

- 本地版本控制系统

  > 单机运行  不支持多人协作开始
  >
  > 版本数据库故障后，所有历史更新记录会丢失

  

  

  ![3](.\media\3.png)

  

  

- 集中化版本控制系统（SVN）

  > 特点：基于服务器，客户端的运行模式
  >
  > **服务器保存文件的所有更新版本**
  >
  > **客户端只保留最新的文件版本**
  >
  > 优点： 联网运行  支持多人
  >
  > 缺点：
  >
  > **不支持离线**提交版本更新
  >
  > 服务器崩溃，所有人都无法正常工作

  ![4](.\media\4.png)

  

- 分布式版本控制系统  Git【】

  >基于服务器，客户端的运行模式
  >
  >联网运行，支持多人协作
  >
  >**断网后，支持离线**提交本地版本更新
  >
  >**服务器故障，可使用客户端的备份进行恢复‘*****
  >
  >**客户端是服务器的完整备份，并不是只保留文件的最新版本**
  >
  >

![5](.\media\5.png)



# Git

#### 什么是Git

> 是一个**开源**的**分布式**版本控制系统   最先进 最流行  高效的处理从小到大的项目版本管理

#### 特点

直接记录快照，而非差异比较

所有的操作都是本地执行

#### SVN差异比较

![6](.\media\6.png)

好处：节省磁盘空间

缺点：耗时  效率低

在每次切换版本的时候，都需要在基文件的基础上，应用每个差异，从而生成目标版本对应的文件

#### Git记录快照

在原有文件版本的基础上重新生成一份新的文件，类似备份，为了效率，**如果文件没有修改，Git不再重新存储该文件，而是只保留一个链接指向之前存储的文件**

![7](.\media\7.png)

缺点：占用磁盘空间大

优点：版本切换非常快，每个版本都是完整的文件快照，切换版本直接恢复 目标版本的快照就可以



Git中绝大多数操作 只需要访问本地文件和资源

断网后依旧可以在本地对项目进行版本管理

联网后，把本地修改的记录同步到云端服务器就可以

#### Git的三大区域[重点]

> 工作区，暂存区，Git仓库

#### Git的三种状态

> 已修改 modified  ：已修改了文件，但还没有将修改的结果放到暂存区
>
> 已暂存 staged  ：对已修改文件的当前版本做了标记，使之包含在下次提交的列表中（文件修改并放入了暂存区）
>
> 已提交 commited   文件已经保存在本地的Git仓库中

#### Git工作流程

- 在工作区修改文件
- 将你想要下次提交的更改进行暂存
- 提交更新，找到暂存区的文件，将快照永久存储到Git仓库

![10](.\media\10.png)



18747110260

# Git使用

#### 安装

https://git-scm.com/downloads

#### 注册账号

https://github.com/

设置邮箱和用户名

#### 配置用户信息 

安装完Git后， 设置自己的用户名和邮件地址

```
git config --global  user.name  "xinglovepeng2019"
git config --global  user.email "505963847@qq.com"

```

**注意** 使用了  --global，该命令只需要运行一次就可以永久生效

配置了用户名和邮箱地址，会被写入到c:/users/用户名文件夹/.gitconfig 文件中，该文件是Git的全局配置文件，配置一次永久生效

#### 检查配置信息

除了使用记事本查看全局配置信息，还可以使用命令

```
#查看所有的全局配置
git config --list --global
#查看指定的全局配置
git config user.name
git config user.email
```

#### 获取帮助信息

无需联网即可在浏览器中打开帮助手册

```
git help config
```

不想查看完整的手册

```
git config -h
```

#### 获取Git仓库的两种方式

- 将没有进行版本控制的本地目录转换为Git仓库

  > 在项目目录中，鼠标右键 打开 “Git Bash"
  >
  > 执行 **git init** 将当前目录转换为Git仓库

  ```
  创建了一个名为 .git的隐藏目录，就是当前项目的Git仓库   包含初始的必要文件，这些文件是Git仓库的必要组成部分
  ```

- 从其它服务器克隆一个已存在的GIt仓库

  ```
  git clone git@github.com:xinglovepeng2019/xx-project.git
  ```

#### 工作区中文件的4种状态

工作区的每一个文件可能有4种状态，这四种状态分为两大类

![工作区的4种状态](.\media\工作区的4种状态.png)

#### 检查文件的状态

查看文件处于什么状态

```
git status

//Untracked files:   未跟踪状态
```

```
#以 简洁的方式显示文件状态  未跟踪的文件前面有红色的？
git status -s  
```

#### 跟踪文件

使用命令git add 来开始跟踪一个文件  （把文件存到暂存区）

```
git add  文件名
```

##### 提交更新

现在有两个文件等待被提交到GIt仓库中，git commit命令提交   -m 本次的提交信息  对提交内容做描述

```
git commit -m "新建了index.html"
```

提交完 工作区的中文件处于 **未修改**状态 没有任何文件需要提交

#### 对提交文件进行修改

Changes not staged for commit:已跟踪文件的内容发生了变化  但还没有放到暂存区

修改过的，没有放入暂存区文件前面有红色的M标记

```
#把修改的文件放入暂存区
git add index.html 
#提交暂存区的文件
git commit -m '文件修改'
```

#### 撤销对文件修改

把对工作区对应的文件修改 还原成git仓库中所保存的版本

操作结果：**所有的修改会丢失无法恢复**

```
git checkout -- index.html
```

#### 暂存区一次性添加多个文件

```
git add .
```

#### 取消暂存的文件

需要从暂存区移除对应的文件

```
git reset HEAD -- 要移除的文件名称
```

#### 跳过使用暂存区域

工作区直接到Git仓库

-a git会把**所有跟踪的文件**暂存起来一并提交  跳过git add

```
git commit -a -m '描述信息'
```

#### 移除文件

```
#从git仓库和工作区同时移除 index.js文件
git rm -f index.js
#只从git仓库中移除  保留工作区中的文件
git rm --cached index.css
```

#### 忽略文件

一般我们总会有些文件无需纳入git的管理，也不需要它们总出现在未跟踪文件列表  这种情况下  我们创建一个名为.gitignore的配置文件

该文件中的配置只能影响哪些当前**还未交由git来**管理的文件

```
# 开头注释
/结尾  的是目录
/开头 防止递归
!开头 取反
```

```
#忽略所有的.a 文件
.a
#跟踪所有的lib.a文件即使在前面忽略了.a文件
!lib.a
#只忽略当前目录下的TODO文件 而不忽略 stu/TODO
/TODO
#忽略任何目录下bulid的文件夹
bulid/
```

#### 查看提交历史

```
#所有的提交历史
git log
#只展示最新的两条提交历史
git log -2

:q   退出
```

#### 回退到指定版本

```
根据指定的提交ID回退到指定版本
git reset --hard  <commitId>
```

# GitHub

开源的项目托管平台

https://github.com/

#### 什么是开源

开发源代码，代码是公开的，任何人都可以去查看，修改和使用开源代码

#### 开源许可协议

开源并不意味着完全没有限制，为了限制使用者的使用范围和保护作者的权利

5种

- BSD

- Apache Licence

- **GPL**   Linux

- LGPL

- **MIT**

  - 目前限制最少的协议，唯一的条件 在修改后的代码和发行包中，必须包含原作者的许可信息

  - jquery   node.js

    

#### 开源托管平台

免费存放开源项目源代码的网站

- **GitHub（全球最牛的）**
- Gitlab（对代码私有性支持好  企业用户多）
- Gitee（码云，国产的  访问速度快  中文界面）

**以上托管平台 只能托管以git管理的项目源代码**

#### 新建空白远程仓库

#### 远程仓库两种访问方式

HTTPS:零配置，每次访问仓库时，要重复输入GitHub账号和密码

SSH:需要进行额外的配置，不需要要重复输入GitHub账号和密码    【推荐】

#### 基于HTTPS将本地仓库上传到GitHub

```
#将本地仓库和远程仓库进行关联， 并把远程仓库命名为origin
git remote add origin https://github.com/xinglovepeng2019/jxxproject_01.git
#将本地仓库的内容推送到远程的origin仓库中
git push -u origin master

//如果已经推送过 再次推送  git push
```

问题

```
远程库和本地库不一致
error: failed to push some refs to 'https://github.com/xinglovepeng2019/jxxproject_01.git'

```

#### 基于SSH将本地仓库上传到GitHub

作用:SSH  本地仓库和GitHub之间免登录的加密数据传输

好处:免登录  数据加密传输

SSH 由两部分组成

- id_rsa  私钥文件 存放于客户端电脑中
- id_rsa_pub  公钥文件  需要配置到GitHub中



#### 生成SSH key

- 打开 Git Bash

- 命令  连续敲3次回车   在C:\users\用户文件夹 \.ssh 目录中生成 id_rsa 和id_rsa.pub

  ```
  ssh-keygen -t rsa -b 4096 -C "505963847@qq.com"
  ```

  

#### 配置SSH key

- 记事本打开 id_rsa_pub,复制里面内容
- 浏览器打开GitHub登陆，点击头像--》settings-》SSH and GPG keys-》New SSH key
- 将 id_rsa_pub文件中的内容，粘贴到key对应的文本框里
- title文本框任意填写名称，来标识key从何而来

####       检测GitHub的SSH key是否配置成功

```
ssh -T git@github.com
```

#### 远程仓库克隆到本地

```
git clone 远程仓库的地址


git clone -b 远程分支名  远程仓库地址
```

# Git分支          

![分支](.\media\分支.png)

#### 查看分支列表

```
git branch
* 表示当前所处的分支   ---本地


git branch -r
查看远程仓库分支
```

#### 创建新分支

```
git branch 分支名称
```

#### 切换分支

```
git checkout login
```

#### 快速创建和切换分支

```
#-b创建一个新分支  checkout切换到刚才创建的新分支上
git checkout -b reg
```

#### 合并分支

功能分支的代码开发测试完毕之后，将完成的代码合并到master分支上

```
#切换到master分支
git checkout master
#在master分支上运行git merge 分支名 命令将分支合并到master分支

```

#### 删除分支

切换到master分支上删除

```
git branch -d 分支名称
```

#### 分支合并遇到冲突

如果在两个不同的分支中，对同一个文件进行了不同的修改，Git就没法干净的合并它们，我们需要打开这些包含冲突的文件然后手动解决冲突



#### 将本地分支推送到远程仓库

如果第一次将本地分支推送到远程仓库  

```
#将本地仓库和远程仓库进行关联， 并把远程仓库命名为origin
git remote add origin https://github.com/xinglovepeng2019/jxxproject_01.git
#将本地仓库的内容推送到远程的origin仓库中
git push -u origin reg
```

第一次推送分支需要 -u 参数，后面可以直接使用git push 推送代码到远程分支

#### 查看远程仓库中的所有分支列表

```
git remote show 远程仓库名称origin
```

#### 拉取远程分支的最新代码

```
git pull
```

#### 远程

```
git clone -b 远程分支明    远程地址          //拉取指定分支代码

git branch -a  查看所有分支


git checkout -b 本地分支   远程分支      创建本地分支  把远程分支的代码拉取到本地创建的分支
```



## 常用的Linux命令

平时一定要多使用这些基础的命令！

1）cd : 改变目录。

2）cd . . 回退到上一个目录，直接cd进入默认目录

3）pwd : 显示当前所在的目录路径。

4）ls(ll):  都是列出当前目录中的所有文件，只不过ll(两个ll)列出的内容更为详细。（Mac只有ll）

5）touch : 新建一个文件 如 touch index.js 就会在当前目录下新建一个index.js文件。

6）rm:  删除一个文件, rm index.js 就会把index.js文件删除。

7）mkdir:  新建一个目录,就是新建一个文件夹。

8）rm -r :  删除一个文件夹, rm -r src 删除src目录

9）mv 移动文件, mv index.html src。 index.html 是我们要移动的文件, src 是目标文件夹,当然, 这样写,必须保证文件和目标文件夹在同一目录下。

10）reset 重新初始化终端/清屏。

11）clear 清屏。

12）history 查看命令历史。

13）help 帮助。（Mac除外）

14）exit 退出。

15）#表示注释